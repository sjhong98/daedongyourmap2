(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{9396:function(A,e,t){Promise.resolve().then(t.bind(t,845))},7164:function(A,e,t){"use strict";t.d(e,{Z:function(){return h}});var n=t(3827),a=t(703),o=t(9214),s=t(2153),r=t(4090),i=t(8800),c=t(6142),l=t(2730),u=t(4905);let d=(A,e,t,n)=>{e(URL.createObjectURL(A)),(0,l.v0)().onAuthStateChanged(e=>{if(e&&e.email){(0,c.ZF)(i.q);let a=(0,u.cF)(),o=(0,u.iH)(a,e.email);(0,u.KV)(o,A).then(A=>{let o=A.metadata.fullPath;(0,u.Jt)((0,u.iH)(a,o)).then(A=>{(0,l.ck)(e,{photoURL:A}).then(()=>{console.log("profile pic changed")}).catch(A=>{console.log(A)}),fetch("https://firestore.googleapis.com/v1/projects/daedongyourmap-ad63d/databases/(default)/documents/users/".concat(n,"?updateMask.fieldPaths=photoURL"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify({fields:{photoURL:{stringValue:A}}})})})})}})};var f=t(9700);function h(){let A;let[e,t]=(0,r.useState)(),i=(0,s.sJ)(f.profileStore),c=(0,s.sJ)(f.idTokenStore);return null!==localStorage&&localStorage.getItem("ddym-email"),(0,r.useEffect)(()=>{i.photoURL?t(i.photoURL):t(o.Z)},[i]),(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{id:"input-image",type:"file",onChange:e=>{A&&d(e.target.files[0],t,c,A)},accept:".png, .jpg, .jpeg, .HEIC, image/*",className:"hidden"}),(0,n.jsx)("label",{htmlFor:"input-image",children:(0,n.jsx)(a.default,{alt:"profile",src:e,width:200,height:200,className:"rounded-full cursor-pointer aspect-square object-cover"})})]})}},9700:function(A,e,t){"use strict";t.r(e),t.d(e,{curComments:function(){return i},curPostStore:function(){return d},default:function(){return h},idTokenStore:function(){return c},isLoginStore:function(){return r},isPostViewOpenStore:function(){return f},postCreatedStore:function(){return o},profileStore:function(){return s},selectedPointStore:function(){return u},userDataStore:function(){return l}});var n=t(3827);t(4090);var a=t(2153);let o=(0,a.cn)({key:"postCreated",default:!1}),s=(0,a.cn)({key:"profile",default:{}}),r=(0,a.cn)({key:"isLogin",default:!1}),i=(0,a.cn)({key:"curComments",default:""}),c=(0,a.cn)({key:"idTokenStore",default:""}),l=(0,a.cn)({key:"userDataStore",default:null}),u=(0,a.cn)({key:"selectedPointStore",default:""}),d=(0,a.cn)({key:"curPostStore",default:null}),f=(0,a.cn)({key:"isPostViewOpen",default:!1});function h(A){let{children:e}=A;return(0,n.jsx)(a.Wh,{children:e})}},845:function(A,e,t){"use strict";t.r(e),t.d(e,{default:function(){return c}});var n=t(3827),a=t(7164),o=t(2153),s=t(4090),r=t(2730),i=t(9700);function c(){let A;let e=(0,o.sJ)(i.profileStore),[t,c]=(0,s.useState)(""),[l,u]=(0,s.useState)(!0),d=(0,o.sJ)(i.idTokenStore);return null!==localStorage&&localStorage.getItem("ddym-email"),(0,s.useEffect)(()=>{e.displayName&&c(e.displayName)},[e]),(0,s.useEffect)(()=>{e.displayName===t||""===t?u(!1):u(!0)},[t]),(0,n.jsxs)("div",{className:"p-12",children:[(0,n.jsx)("title",{children:"대동, 당신의 지도 | 프로필"}),(0,n.jsx)("p",{className:"text-white text-[2rem]",children:"프로필 수정"}),(0,n.jsxs)("div",{className:"bg-stone-900 w-[90%] h-[30vh] rounded-2xl center flex-col mt-3",children:[(0,n.jsx)(a.Z,{}),(0,n.jsx)("label",{htmlFor:"input-image",className:"rounded-md h-[3vh] bg-stone-300 text-black cursor-pointer nnn center mt-4 p-1",children:"사진 변경"})]}),(0,n.jsxs)("div",{className:"bg-stone-900 w-[90%] h-[10vh] rounded-2xl center mt-3",children:[(0,n.jsx)("input",{onChange:A=>c(A.target.value),value:t,className:"bg-stone-800 rounded-2xl mr-2 nnn focus:outline-none px-4"}),l?(0,n.jsx)("button",{onClick:()=>{(0,r.v0)().onAuthStateChanged(e=>{e&&((0,r.ck)(e,{displayName:t}).then(()=>{console.log("display name changed"),alert("이름이 변경되었습니다.")}).catch(A=>{console.log(A)}),A&&fetch("https://firestore.googleapis.com/v1/projects/daedongyourmap-ad63d/databases/(default)/documents/users/".concat(A,"?updateMask.fieldPaths=displayName"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(d)},body:JSON.stringify({fields:{displayName:{stringValue:t}}})}))})},className:"bg-stone-300 rounded-md nnn text-black p-1",children:"변경"}):(0,n.jsx)(n.Fragment,{})]})]})}},8800:function(A,e,t){"use strict";t.d(e,{q:function(){return n}});let n={apiKey:"AIzaSyCA6Q_TA6dyl7wf2BtR_V_oEVIW2_Q94y0",authDomain:"daedongyourmap-ad63d.firebaseapp.com",projectId:"daedongyourmap-ad63d",storageBucket:"daedongyourmap-ad63d.appspot.com",messagingSenderId:"68098855208",appId:"1:68098855208:web:aa0e9a5602074a3b6c401d",measurementId:"G-7X00QEEQ08"}},9214:function(A,e){"use strict";e.Z={src:"/_next/static/media/defaultProfilePic.513224af.jpeg",height:360,width:360,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGmB//EABUQAQEAAAAAAAAAAAAAAAAAABMj/9oACAEBAAEFAkv/AP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABgQAAIDAAAAAAAAAAAAAAAAAAARARIx/9oACAEBAAY/AlaViP/EABcQAQADAAAAAAAAAAAAAAAAABEAIZH/2gAIAQEAAT8hGQKZ/9oADAMBAAIAAwAAABAD/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPxB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPxB//8QAFxAAAwEAAAAAAAAAAAAAAAAAAEHB8P/aAAgBAQABPxDVAVn/2Q==",blurWidth:8,blurHeight:8}}},function(A){A.O(0,[691,380,749,723,475,486,971,69,744],function(){return A(A.s=9396)}),_N_E=A.O()}]);