(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{9396:function(e,t,n){Promise.resolve().then(n.bind(n,3677))},6221:function(e,t,n){"use strict";n.d(t,{Z:function(){return ProfilePic}});var o=n(7437),a=n(6691),r=n.n(a),s=n(9903),i=n(5883),c=n(2265),d=n(5075),l=n(994),u=n(3085),A=n(9584);let updateProfilePic=(e,t,n,o)=>{t(URL.createObjectURL(e));let a=(0,u.v0)();a.onAuthStateChanged(t=>{if(t&&t.email){(0,l.ZF)(d.q);let a=(0,A.cF)(),r=(0,A.iH)(a,t.email);(0,A.KV)(r,e).then(e=>{let r=e.metadata.fullPath;(0,A.Jt)((0,A.iH)(a,r)).then(e=>{(0,u.ck)(t,{photoURL:e}).then(()=>{console.log("profile pic changed")}).catch(e=>{console.log(e)}),fetch("https://firestore.googleapis.com/v1/projects/daedongyourmap-ad63d/databases/(default)/documents/users/".concat(o,"?updateMask.fieldPaths=photoURL"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify({fields:{photoURL:{stringValue:e}}})})})})}})};var f=n(62);function ProfilePic(){let[e,t]=(0,c.useState)(),n=(0,i.sJ)(f.profileStore),a=(0,i.sJ)(f.idTokenStore),d=localStorage.getItem("ddym-email");return(0,c.useEffect)(()=>{n.photoURL?t(n.photoURL):t(s.Z)},[n]),(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{id:"input-image",type:"file",onChange:e=>{d&&updateProfilePic(e.target.files[0],t,a,d)},accept:".png, .jpg, .jpeg, .HEIC, image/*",className:"hidden"}),(0,o.jsx)("label",{htmlFor:"input-image",children:(0,o.jsx)(r(),{alt:"profile",src:e,width:200,height:200,className:"rounded-full cursor-pointer aspect-square object-cover"})})]})}},62:function(e,t,n){"use strict";n.r(t),n.d(t,{curComments:function(){return i},curPostStore:function(){return u},default:function(){return RecoilContextProvider},idTokenStore:function(){return c},isLoginStore:function(){return s},isPostViewOpenStore:function(){return A},profileStore:function(){return r},selectedPointStore:function(){return l},userDataStore:function(){return d}});var o=n(7437);n(2265);var a=n(5883);let r=(0,a.cn)({key:"profile",default:{}}),s=(0,a.cn)({key:"isLogin",default:!1}),i=(0,a.cn)({key:"curComments",default:""}),c=(0,a.cn)({key:"idTokenStore",default:""}),d=(0,a.cn)({key:"userDataStore",default:null}),l=(0,a.cn)({key:"selectedPointStore",default:""}),u=(0,a.cn)({key:"curPostStore",default:null}),A=(0,a.cn)({key:"isPostViewOpen",default:!1});function RecoilContextProvider(e){let{children:t}=e;return(0,o.jsx)(a.Wh,{children:t})}},3677:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Edit}});var o=n(7437),a=n(5883),r=n(2265),s=n(6221),i=n(62),c=n(3085);function Edit(){let e=(0,a.sJ)(i.profileStore),[t,n]=(0,r.useState)(""),[d,l]=(0,r.useState)(!0),u=(0,a.sJ)(i.idTokenStore),A=localStorage.getItem("ddym-email");return(0,r.useEffect)(()=>{e.displayName&&n(e.displayName)},[e]),(0,r.useEffect)(()=>{e.displayName===t||""===t?l(!1):l(!0)},[t]),(0,o.jsxs)("div",{className:"p-12",children:[(0,o.jsx)("p",{className:"text-white text-[2rem]",children:"프로필 수정"}),(0,o.jsxs)("div",{className:"bg-stone-900 w-[90%] h-[30vh] rounded-2xl center flex-col mt-3",children:[(0,o.jsx)(s.Z,{}),(0,o.jsx)("label",{htmlFor:"input-image",className:"rounded-md h-[3vh] bg-stone-300 text-black cursor-pointer nnn center mt-4 p-1",children:"사진 변경"})]}),(0,o.jsxs)("div",{className:"bg-stone-900 w-[90%] h-[10vh] rounded-2xl center mt-3",children:[(0,o.jsx)("input",{onChange:e=>n(e.target.value),value:t,className:"bg-stone-800 rounded-2xl mr-2 nnn focus:outline-none px-4"}),d?(0,o.jsx)("button",{onClick:()=>{let e=(0,c.v0)();e.onAuthStateChanged(e=>{e&&((0,c.ck)(e,{displayName:t}).then(()=>{console.log("display name changed"),alert("이름이 변경되었습니다.")}).catch(e=>{console.log(e)}),A&&fetch("https://firestore.googleapis.com/v1/projects/daedongyourmap-ad63d/databases/(default)/documents/users/".concat(A,"?updateMask.fieldPaths=displayName"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(u)},body:JSON.stringify({fields:{displayName:{stringValue:t}}})}))})},className:"bg-stone-300 rounded-md nnn text-black p-1",children:"변경"}):(0,o.jsx)(o.Fragment,{})]})]})}},5075:function(e,t,n){"use strict";n.d(t,{q:function(){return o}});let o={apiKey:"AIzaSyCA6Q_TA6dyl7wf2BtR_V_oEVIW2_Q94y0",authDomain:"daedongyourmap-ad63d.firebaseapp.com",projectId:"daedongyourmap-ad63d",storageBucket:"daedongyourmap-ad63d.appspot.com",messagingSenderId:"68098855208",appId:"1:68098855208:web:aa0e9a5602074a3b6c401d",measurementId:"G-7X00QEEQ08"}},9903:function(e,t){"use strict";t.Z={src:"/_next/static/media/defaultProfilePic.513224af.jpeg",height:360,width:360,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAeEAABAwQDAAAAAAAAAAAAAAAAEhMVAgMUIjNB8f/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCmSNM+3k3G+NtOqvewAB//2Q==",blurWidth:8,blurHeight:8}},994:function(e,t,n){"use strict";n.d(t,{ZF:function(){return o.ZF}});var o=n(3991);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,o.KN)("firebase","10.8.0","app")}},function(e){e.O(0,[691,380,964,928,161,584,971,864,744],function(){return e(e.s=9396)}),_N_E=e.O()}]);