(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{6929:function(e,t,A){Promise.resolve().then(A.bind(A,5971))},9487:function(e,t,A){"use strict";A.d(t,{A:function(){return s}});let s=async e=>{let t;console.log("looking for",e,"'s data");let A=await fetch("https://firestore.googleapis.com/v1/projects/daedongyourmap-ad63d/databases/(default)/documents/users/".concat(e),{method:"GET"}),s=await A.json();return void 0!==s.fields&&(t={displayName:s.fields.displayName.stringValue,photoURL:s.fields.photoURL.stringValue,follower:s.fields.follewer.arrayValue.values,follow:s.fields.follow.arrayValue.values}),t}},5971:function(e,t,A){"use strict";A.r(t),A.d(t,{default:function(){return u}});var s=A(3827),a=A(703),o=A(1518),l=A(7164),n=A(9214),c=A(7907),r=A(4090);let i=async e=>{let t=await fetch("https://firestore.googleapis.com/v1/projects/daedongyourmap-ad63d/databases/(default)/documents:runQuery",{method:"POST",cache:"no-cache",body:JSON.stringify({structuredQuery:{from:[{collectionId:"posts"}],where:{fieldFilter:{field:{fieldPath:"user"},op:"EQUAL",value:{stringValue:"".concat(e)}}},orderBy:[{field:{fieldPath:"createTime"},direction:"DESCENDING"}]}})}),A=await t.json(),s=[];return A.map(e=>{let t=e.document;void 0!==t&&s.push({createTime:t.createTime,title:t.fields.title.stringValue,content:t.fields.content.stringValue,point:t.fields.point.stringValue,photo:t.fields.photo.arrayValue.values,user:t.fields.user.stringValue,comments:t.fields.comments.arrayValue.values,name:t.name,likes:t.fields.likes.arrayValue.values})}),s};var d=A(9487);function u(e){let t;let A=(0,c.useRouter)(),u=e.params.email.replace("%40","@"),h="text-white text-[1rem]";null!==localStorage&&localStorage.getItem("ddym-email");let[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)("test"),[x,v]=(0,r.useState)([]),[j,y]=(0,r.useState)([]),[w,B]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!0),[N,Q]=(0,r.useState)(""),[k,I]=(0,r.useState)([]),b="text-white nnn mt-4 cursor-pointer";(0,r.useEffect)(()=>{(0,d.A)(u).then(e=>{v(["sjhong98@Icloud.com","elyont98@naver.com","test@test.com"]),y(["sjhong98@Icloud.com","elyont98@naver.com","test@test.com"]),void 0!==e&&(""!==e.displayName&&void 0!==e.displayName?g(e.displayName):g(u),v(["sjhong98@Icloud.com","elyont98@naver.com","test@test.com"]),y(["sjhong98@Icloud.com","elyont98@naver.com","test@test.com"]),""!==e.photoURL&&void 0!==e.photoURL&&Q(e.photoURL),u===t?m(!0):m(!1))}),i(u).then(e=>{I(e)})},[]);let C=e=>{A.push("/profile/".concat(e))};return(0,s.jsxs)("div",{className:"flex w-screen h-full",children:[(0,s.jsx)("title",{children:"대동, 당신의 지도 | 프로필"}),w?(0,s.jsx)("div",{id:"outside-view",onClick:e=>{"outside-view"===e.target.id&&B(!1)},className:"fixed w-screen h-[100vh] z-[100] center mt-[-20vh] backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"bg-stone-800 w-[25vw] h-[35vh] rounded-2xl shadow-2xl",children:[(0,s.jsx)("div",{className:"border-b-[1px] border-stone-600 w-full h-[4vh] center",children:(0,s.jsx)("p",{className:"text-white nnn",children:E?"팔로우":"팔로워"})}),(0,s.jsx)("div",{className:"p-6",children:E?x.map((e,t)=>(0,s.jsx)("p",{onClick:()=>C(e),className:b,children:e},t)):j.map((e,t)=>(0,s.jsx)("p",{onClick:()=>C(e),className:b,children:e},t))})]})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"w-1/3 h-full center",children:[f?(0,s.jsx)(l.Z,{}):""===N?(0,s.jsx)(a.default,{src:n.Z,width:200,height:200,alt:"...",className:"rounded-full"}):(0,s.jsx)(a.default,{src:N,width:200,height:200,alt:"...",className:"rounded-full"}),(0,s.jsxs)("div",{className:"flex flex-col ml-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("p",{className:"text-white nnn text-[1.5rem]",children:p}),(0,s.jsx)(o.Z,{className:"cursor-pointer ml-2",onClick:()=>{A.push("/setting/edit")}})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("p",{className:"".concat(h," nnn"),children:"팔로우"}),(0,s.jsx)("p",{className:"".concat(h," nnb ml-1 cursor-pointer"),onClick:()=>{B(!0),S(!0)},children:"100"}),(0,s.jsx)("p",{className:"".concat(h," nnn ml-3"),children:"팔로워"}),(0,s.jsx)("p",{className:"".concat(h," nnb ml-1 cursor-pointer"),onClick:()=>{B(!0),S(!0)},children:"100"})]})]})]}),(0,s.jsx)("div",{className:"w-2/3 h-full center",children:"hlelo"})]})}},7164:function(e,t,A){"use strict";A.d(t,{Z:function(){return f}});var s=A(3827),a=A(703),o=A(9214),l=A(2153),n=A(4090),c=A(8800),r=A(6142),i=A(2730),d=A(4905);let u=(e,t,A,s)=>{t(URL.createObjectURL(e)),(0,i.v0)().onAuthStateChanged(t=>{if(t&&t.email){(0,r.ZF)(c.q);let a=(0,d.cF)(),o=(0,d.iH)(a,t.email);(0,d.KV)(o,e).then(e=>{let o=e.metadata.fullPath;(0,d.Jt)((0,d.iH)(a,o)).then(e=>{(0,i.ck)(t,{photoURL:e}).then(()=>{console.log("profile pic changed")}).catch(e=>{console.log(e)}),fetch("https://firestore.googleapis.com/v1/projects/daedongyourmap-ad63d/databases/(default)/documents/users/".concat(s,"?updateMask.fieldPaths=photoURL"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(A)},body:JSON.stringify({fields:{photoURL:{stringValue:e}}})})})})}})};var h=A(9700);function f(){let e;let[t,A]=(0,n.useState)(),c=(0,l.sJ)(h.profileStore),r=(0,l.sJ)(h.idTokenStore);return null!==localStorage&&localStorage.getItem("ddym-email"),(0,n.useEffect)(()=>{c.photoURL?A(c.photoURL):A(o.Z)},[c]),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{id:"input-image",type:"file",onChange:t=>{e&&u(t.target.files[0],A,r,e)},accept:".png, .jpg, .jpeg, .HEIC, image/*",className:"hidden"}),(0,s.jsx)("label",{htmlFor:"input-image",children:(0,s.jsx)(a.default,{alt:"profile",src:t,width:200,height:200,className:"rounded-full cursor-pointer aspect-square object-cover"})})]})}},9700:function(e,t,A){"use strict";A.r(t),A.d(t,{curComments:function(){return c},curPostStore:function(){return u},default:function(){return f},idTokenStore:function(){return r},isLoginStore:function(){return n},isPostViewOpenStore:function(){return h},postCreatedStore:function(){return o},profileStore:function(){return l},selectedPointStore:function(){return d},userDataStore:function(){return i}});var s=A(3827);A(4090);var a=A(2153);let o=(0,a.cn)({key:"postCreated",default:!1}),l=(0,a.cn)({key:"profile",default:{}}),n=(0,a.cn)({key:"isLogin",default:!1}),c=(0,a.cn)({key:"curComments",default:""}),r=(0,a.cn)({key:"idTokenStore",default:""}),i=(0,a.cn)({key:"userDataStore",default:null}),d=(0,a.cn)({key:"selectedPointStore",default:""}),u=(0,a.cn)({key:"curPostStore",default:null}),h=(0,a.cn)({key:"isPostViewOpen",default:!1});function f(e){let{children:t}=e;return(0,s.jsx)(a.Wh,{children:t})}},8800:function(e,t,A){"use strict";A.d(t,{q:function(){return s}});let s={apiKey:"AIzaSyCA6Q_TA6dyl7wf2BtR_V_oEVIW2_Q94y0",authDomain:"daedongyourmap-ad63d.firebaseapp.com",projectId:"daedongyourmap-ad63d",storageBucket:"daedongyourmap-ad63d.appspot.com",messagingSenderId:"68098855208",appId:"1:68098855208:web:aa0e9a5602074a3b6c401d",measurementId:"G-7X00QEEQ08"}},1518:function(e,t,A){"use strict";var s=A(891);t.Z=void 0;var a=s(A(9438)),o=A(3827);t.Z=(0,a.default)((0,o.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},9214:function(e,t){"use strict";t.Z={src:"/_next/static/media/defaultProfilePic.513224af.jpeg",height:360,width:360,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4+JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGmB//EABUQAQEAAAAAAAAAAAAAAAAAABMj/9oACAEBAAEFAkv/AP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABgQAAIDAAAAAAAAAAAAAAAAAAARARIx/9oACAEBAAY/AlaViP/EABcQAQADAAAAAAAAAAAAAAAAABEAIZH/2gAIAQEAAT8hGQKZ/9oADAMBAAIAAwAAABAD/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPxB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPxB//8QAFxAAAwEAAAAAAAAAAAAAAAAAAEHB8P/aAAgBAQABPxDVAVn/2Q==",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[691,380,749,723,869,475,486,4,971,69,744],function(){return e(e.s=6929)}),_N_E=e.O()}]);